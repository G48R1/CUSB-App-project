<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="manifest" href="../src/manifest.json"/>
  <link rel="icon" href="../src/icons/CUSB-192.png">
  <meta name="theme-color" content="#007bff"/>

  <link rel="stylesheet" href="style-libretto.css">
  <script type="module" src="script-libretto.js"></script>
  <title>Libretto dei canti</title>
</head>
<body>

  <nav>
    <div class="nav-bar">
      <div class="nav-label">Libretto</div>
      <div>
        <button class="nav-btn"><a href="../index.html">üè†Ô∏é</a></button><!--‚ñ∂-->
      </div>
    </div>
    <div class="search">
      <label for="search-bar" id="search-label">‚åï</label>
      <input name="search-bar" id="search-bar">
    </div>
  </nav>

  <main>
    <!-- <div>
      <div class="song-title cursor-pointer"><a href="./canto/canto.html" onclick="">Titolo</a></div>
      popolato dinamicamente
    </div> -->
  </main>

  <footer></footer>

  <!-- <script>
//    import { joinPath } from "../src2/config/utils.js";
//    import { INDICE_CANTI_DIR } from "../src2/config/config.js";
    // Attendi che il DOM sia caricato
    document.addEventListener('DOMContentLoaded', () => {
      const main = document.querySelector('main');

      fetch('/libretto/indice-canti/indice_canti.json')
      //fetch(joinPath(INDICE_CANTI_DIR, 'indice_canti.json'))
        .then(response => response.json())
        .then(data => {
          // Svuota il main prima di inserire i canti
          main.innerHTML = '';

          data.forEach(canto => {
            const container = document.createElement('div');
            container.className = 'song';
            const titleDiv = document.createElement('div');
            titleDiv.className = 'song-title cursor-pointer';

            const numero = document.createElement("span");
            numero.className = 'numero-canto'
            numero.textContent = canto.numero;

            const link = document.createElement('a');
            link.href = `./canto-template/canto.html?path=${encodeURIComponent(canto.link?.default)}&title=${encodeURIComponent(canto.name)}&numero=${canto.numero}`;
            link.textContent = canto.name;

            container.appendChild(numero);

            titleDiv.appendChild(link);
            container.appendChild(titleDiv);
            main.appendChild(container);
          });
        })
        .catch(error => {
          console.error('Errore nel caricamento dei canti:', error);
          main.innerHTML = '<p>Errore nel caricamento dei canti.</p>';
        });

      const searchBar = document.getElementById('search-bar');

      searchBar.addEventListener('input', (e) => {
        const searchTerm = e.target.value.toLowerCase();

        document.querySelectorAll('.song').forEach(song => {
          const text = song.textContent.toLowerCase();
          song.style.display = text.includes(searchTerm) ? '' : 'none';
        });
      });

    });
  </script> -->

</body>
</html>